(this.webpackJsonptrybewallet=this.webpackJsonptrybewallet||[]).push([[0],{36:function(e,t,n){e.exports=n.p+"static/media/imgLogin.938bb142.png"},37:function(e,t,n){e.exports=n.p+"static/media/logo-wallet.12c62714.png"},38:function(e,t,n){e.exports=n(58)},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(22),c=n.n(i),l=n(9),u=n(18),o=n(15),s=n(34),d=n(35),p=n(3),m=n(20),h=n.n(m),E=n(26),b=function(e){return{type:"GET_CURRENCIES",currencies:e}},f=function(e){return{type:"ADD_EXPENSE",expense:e}},v={email:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(p.a)(Object(p.a)({},e),{},{email:t.email});default:return e}},g=n(31),j={currencies:[],expenses:[],isLoading:!1,edit:!1,toEdit:{}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQ_CURRENCIES":return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0});case"GET_CURRENCIES":return Object(p.a)(Object(p.a)({},e),{},{currencies:t.currencies,isLoading:!1});case"ADD_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{expenses:[].concat(Object(g.a)(e.expenses),[t.expense])});case"DELETE_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{expenses:Object(g.a)(t.expenses)});case"EDITING_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{edit:!0,toEdit:t.expense});case"EDITED_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{edit:!1,toEdit:{},expenses:t.expenses});default:return e}},x=Object(o.combineReducers)({user:y,wallet:O}),C=Object(o.createStore)(x,Object(s.composeWithDevTools)(Object(o.applyMiddleware)(d.a))),w=(n(48),n(4)),k=n(16),N=n(11),I=n(12),D=n(5),T=n(14),B=n(13),S=(n(49),n(36)),R=n.n(S),L=function(e){Object(T.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).state={email:"",password:"",disable:!0},a.handleChange=a.handleChange.bind(Object(D.a)(a)),a.handleClick=a.handleClick.bind(Object(D.a)(a)),a}return Object(I.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState(Object(k.a)({},a,r),(function(){return t.validInput()}))}},{key:"validInput",value:function(){var e=this.state,t=e.email,n=e.password,a=new RegExp(/^[\w.]+@[a-z]+.\w{2,3}$/g),r=new RegExp(/[\w\D]{6}/g);a.test(t)&&r.test(n)?this.setState({disable:!1}):this.setState({disable:!0})}},{key:"handleClick",value:function(){var e=this.state.email;(0,this.props.login)(e)}},{key:"render",value:function(){var e=this.state,t=e.disable,n=e.email,a=e.password;return r.a.createElement("div",{className:"Login"},r.a.createElement("img",{src:R.a,alt:"Wallet"}),r.a.createElement("h1",null,"TrybeWallet"),r.a.createElement("h2",null,"Login"),r.a.createElement("form",{className:"form-login"},r.a.createElement("label",{htmlFor:"email-input"},"Email:",r.a.createElement("input",{type:"text","data-testid":"email-input",id:"email-input",name:"email",value:n,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password-input"},"Senha:",r.a.createElement("input",{type:"password","data-testid":"password-input",id:"password-input",name:"password",value:a,onChange:this.handleChange})),r.a.createElement(u.b,{to:"/carteira"},r.a.createElement("button",{type:"button",onClick:this.handleClick,disabled:t},"Entrar"))))}}]),n}(r.a.Component),A=Object(l.b)(null,(function(e){return{login:function(t){return e(function(e){return{type:"LOGIN",email:e}}(t))}}}))(L),P=(n(51),n(37)),F=n.n(P),_=function(e){Object(T.a)(n,e);var t=Object(B.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses,a=0;return n.length>0&&(a=n.reduce((function(e,t){return e+Number(t.value)*Number(t.exchangeRates[t.currency].ask)}),0).toFixed(2)),r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:F.a,alt:"logo trybewallet"}),r.a.createElement("h1",null,"TrybeWallet")),r.a.createElement("h3",{"data-testid":"email-field",className:"email"},t),r.a.createElement("div",{className:"currency"},r.a.createElement("h3",{className:"total"},"Despesas: R$",r.a.createElement("p",{"data-testid":"total-field"},a)),r.a.createElement("h5",{"data-testid":"header-currency-field"},"BRL")))}}]),n}(a.Component),M=Object(l.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(_),X=(n(52),function(e){Object(T.a)(n,e);var t=Object(B.a)(n);function n(e){var a;Object(N.a)(this,n);var r=(a=t.call(this,e)).props,i=r.editing,c=r.expenseToEdit;return a.state=i?c:{id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},a.handleChange=a.handleChange.bind(Object(D.a)(a)),a.handleAddButton=a.handleAddButton.bind(Object(D.a)(a)),a.renderValueInput=a.renderValueInput.bind(Object(D.a)(a)),a.renderDescriptionInput=a.renderDescriptionInput.bind(Object(D.a)(a)),a.renderCurrencyInput=a.renderCurrencyInput.bind(Object(D.a)(a)),a.renderPaymentInput=a.renderPaymentInput.bind(Object(D.a)(a)),a.renderTagInput=a.renderTagInput.bind(Object(D.a)(a)),a.renderAddButton=a.renderAddButton.bind(Object(D.a)(a)),a.renderEditButton=a.renderEditButton.bind(Object(D.a)(a)),a.handleEditButton=a.handleEditButton.bind(Object(D.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(D.a)(a)),a}return Object(I.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchCoins)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(k.a)({},n,a))}},{key:"handleAddButton",value:function(){(0,this.props.addExpense)(this.state),this.setState((function(e){return{id:e.id+1,value:"",description:""}}))}},{key:"handleKeyDown",value:function(e){var t=this.props.addExpense;13===e.keyCode&&(t(this.state),this.setState((function(e){return{id:e.id+1,value:"",description:""}})))}},{key:"handleEditButton",value:function(){var e=this.props,t=e.expenses,n=e.dispatchEditedExpenses,a=e.expenseToEdit,r=this.state,i=Object(p.a)(Object(p.a)({},a),r);n(t.map((function(e){return e.id===i.id?Object(p.a)(Object(p.a)({},e),i):Object(p.a)({},e)})))}},{key:"renderValueInput",value:function(){var e=this.state.value;return r.a.createElement("label",{htmlFor:"value"},"Valor:",r.a.createElement("input",{type:"number",id:"value","data-testid":"value-input",name:"value",value:e,onChange:this.handleChange,onKeyDown:this.handleKeyDown}))}},{key:"renderDescriptionInput",value:function(){var e=this.state.description;return r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text","data-testid":"description-input",id:"description",name:"description",value:e,onChange:this.handleChange,maxLength:30}))}},{key:"renderCurrencyInput",value:function(){var e=this.props.currencies,t=this.state.currency;return r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{"data-testid":"currency-input",name:"currency",id:"currency",value:t,onChange:this.handleChange},e.map((function(e){return r.a.createElement("option",{"data-testid":e,value:e,key:Math.random()},e)}))))}},{key:"renderPaymentInput",value:function(){var e=this.state.method;return r.a.createElement("label",{htmlFor:"method"},"Pagamento:",r.a.createElement("select",{"data-testid":"method-input",name:"method",id:"method",value:e,onChange:this.handleChange},["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"].map((function(e){return r.a.createElement("option",{key:Math.random()},e)}))))}},{key:"renderTagInput",value:function(){var e=this.state.tag;return r.a.createElement("label",{htmlFor:"tag"},"Categoria:",r.a.createElement("select",{"data-testid":"tag-input",name:"tag",id:"tag",value:e,onChange:this.handleChange},["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"].map((function(e){return r.a.createElement("option",{key:Math.random()},e)}))))}},{key:"renderAddButton",value:function(){return r.a.createElement("button",{type:"button",className:"add-button",onClick:this.handleAddButton},"Adicionar despesa")}},{key:"renderEditButton",value:function(){return r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:this.handleEditButton,className:"edit-button"},"Editar despesa")}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.editing;return t?r.a.createElement("div",null,"...Loading"):r.a.createElement("form",{className:"AddExpense"},this.renderValueInput(),this.renderDescriptionInput(),this.renderCurrencyInput(),this.renderPaymentInput(),this.renderTagInput(),!n&&this.renderAddButton(),n&&this.renderEditButton())}}]),n}(a.Component)),V=Object(l.b)((function(e){return{currencies:e.wallet.currencies,isLoading:e.wallet.isLoading,editing:e.wallet.edit,expenseToEdit:e.wallet.toEdit,expenses:e.wallet.expenses}}),(function(e){return{fetchCoins:function(){return e(function(){var e=Object(E.a)(h.a.mark((function e(t){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQ_CURRENCIES"}),e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,(r=Object.keys(a)).splice(1,1),e.abrupt("return",t(b(r)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addExpense:function(t){return e(function(e){return function(){var t=Object(E.a)(h.a.mark((function t(n){var a,r,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return a=t.sent,t.next=5,a.json();case 5:return r=t.sent,i=Object(p.a)(Object(p.a)({},e),{},{exchangeRates:r}),t.abrupt("return",n(f(i)));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},dispatchEditedExpenses:function(t){return e(function(e){return{type:"EDITED_EXPENSE",expenses:e}}(t))}}}))(X),G=n(29),W=n(30),K=(n(56),function(e){Object(T.a)(n,e);var t=Object(B.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).renderTableBody=a.renderTableBody.bind(Object(D.a)(a)),a}return Object(I.a)(n,[{key:"handleDelete",value:function(e){var t=this.props,n=t.expenses;(0,t.deleteExpense)(n.filter((function(t){return t.id!==e.id})))}},{key:"handleEdit",value:function(e){(0,this.props.expenseToEdit)(e)}},{key:"renderTableBody",value:function(){var e=this,t=this.props,n=t.expenses,a=t.edit;return r.a.createElement("tbody",null,n.map((function(t){return r.a.createElement("tr",{key:Math.random(),className:"table-body"},r.a.createElement("td",null,t.description||"Sem descri\xe7\xe3o"),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,Number(t.value).toFixed(2)||"0.00"),r.a.createElement("td",null,t.exchangeRates[t.currency].name),r.a.createElement("td",null,Number(t.exchangeRates[t.currency].ask).toFixed(2)),r.a.createElement("td",null,Number(t.value*t.exchangeRates[t.currency].ask).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",{className:"icons"},r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return e.handleEdit(t)},disabled:a},r.a.createElement(G.a,{icon:W.a,className:"icon icon-edit"})),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return e.handleDelete(t)},disabled:a},r.a.createElement(G.a,{icon:W.b,className:"icon icon-delete"}))))})))}},{key:"render",value:function(){return r.a.createElement("table",{className:"TableExpenses"},r.a.createElement("thead",{className:"table-head"},r.a.createElement("tr",null,r.a.createElement("th",{className:"description"},"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),this.renderTableBody())}}]),n}(a.Component)),U=Object(l.b)((function(e){return{expenses:e.wallet.expenses,edit:e.wallet.edit}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:"DELETE_EXPENSE",expenses:e}}(t))},expenseToEdit:function(t){return e(function(e){return{type:"EDITING_EXPENSE",expense:e}}(t))}}}))(K),z=function(e){Object(T.a)(n,e);var t=Object(B.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var e=this.props.editing;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement(V,{key:e}),r.a.createElement(U,null))}}]),n}(r.a.Component),$=Object(l.b)((function(e){return{editing:e.wallet.edit}}))(z);n(57);var J=function(){return r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/carteira",component:$}),r.a.createElement(w.a,{exact:!0,path:"/",component:A}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,{store:C},r.a.createElement(u.a,null,r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.d183acb2.chunk.js.map